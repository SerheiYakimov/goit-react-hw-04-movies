(this["webpackJsonpgoit-react-hw-04-movies"]=this["webpackJsonpgoit-react-hw-04-movies"]||[]).push([[0],{14:function(e,t,n){e.exports={searchbar:"Searchbar_searchbar__jo466",searchForm:"Searchbar_searchForm__23jwf",searchButton:"Searchbar_searchButton__1Ml9x",searchButtonLabel:"Searchbar_searchButtonLabel__2BLFE",searchInput:"Searchbar_searchInput__1DwaM",reactIcons:"Searchbar_reactIcons__ukWGd"}},16:function(e,t,n){e.exports={link:"Navigation_link__12o2K",activeLink:"Navigation_activeLink__2rUFB"}},26:function(e,t,n){e.exports={galleryItem:"MovieItem_galleryItem__34gA0",imageGalleryItem:"MovieItem_imageGalleryItem__37LvD"}},40:function(e,t,n){e.exports={gallery:"HomePage_gallery__3wSUR"}},41:function(e,t,n){e.exports={button:"Button_button__3QF_k"}},42:function(e,t,n){e.exports={gallery:"MoviesGallery_gallery__221wu"}},48:function(e,t,n){},49:function(e,t,n){},94:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),o=n(19),r=n.n(o),i=n(10),s=(n(48),n(2)),l=(n(49),n(16)),u=n.n(l),h=n(1),j=function(){return Object(h.jsxs)("nav",{children:[Object(h.jsx)(i.c,{exact:!0,to:"/",className:u.a.link,activeClassName:u.a.activeLink,children:"HomePage"}),Object(h.jsx)(i.c,{to:"/movies",className:u.a.link,activeClassName:u.a.activeLink,children:"MoviesPage"})]})},b=n(13),d=n(5),v=n(38),m=n(39),g=n(22),f=n.n(g),O=function(){function e(){Object(v.a)(this,e),this._searchQuery="",this._page=1}return Object(m.a)(e,[{key:"searchQuery",get:function(){return this._searchQuery},set:function(e){return this._searchQuery=e}},{key:"page",get:function(){return this._page},set:function(e){return this._page+=e}},{key:"resetPage",value:function(){return this._page=1}},{key:"trendingMovies",value:function(){var e="https://api.themoviedb.org/3/"+"trending/all/day?api_key=".concat("7c2b2b3c6c797e2889781dee57c7a6ae","&page=").concat(this._page);return f.a.get(e).then((function(e){return console.log(e),e.data})).then((function(e){return console.log(e.results),e.results})).catch((function(e){return console.log(e)}))}},{key:"searchMovies",value:function(){var e="https://api.themoviedb.org/3/"+"search/movie?api_key=".concat("7c2b2b3c6c797e2889781dee57c7a6ae","&query=").concat(this._searchQuery,"&language=en-US&page=").concat(this._page,"&include_adult=false");return f.a.get(e).then((function(e){return console.log(e),e.data})).then((function(e){return console.log(e.results),e.results})).catch((function(e){return console.log(e)}))}},{key:"searchMoviesId",value:function(e){var t="https://api.themoviedb.org/3/"+"movie/".concat(e,"?api_key=").concat("7c2b2b3c6c797e2889781dee57c7a6ae","&language=en-US");return f.a.get(t).then((function(e){return console.log(e),e.data})).catch((function(e){return console.log(e)}))}}]),e}(),p=n(40),x=n.n(p),_=n(3),y=n.n(_),k=n(26),w=n.n(k),S=n.p+"static/media/not-found-image.22bff5ce.jpeg";function N(e){var t=e.poster,n=e.id,c=e.name,a=t?"".concat("https://image.tmdb.org/t/p/w500").concat(t):S,o=Object(s.g)();return Object(h.jsxs)("li",{className:w.a.galleryItem,children:[Object(h.jsx)("h1",{children:"".concat(c)}),Object(h.jsx)(i.b,{to:{pathname:"/movies/".concat(n),state:{from:{location:o,label:"back to movies"}}},children:Object(h.jsx)("img",{src:a,alt:c,className:w.a.imageGalleryItem})})]},n)}N.defaultProps={poster:S},N.propsTypes={poster:y.a.string,id:y.a.number,name:y.a.string};var I=n(41),F=n.n(I);function M(e){var t=e.onClick;return Object(h.jsx)("button",{className:F.a.button,type:"button",onClick:t,children:"Load more"})}var B=n(21),C=n.n(B),P=new O;function E(){var e=Object(c.useState)([]),t=Object(d.a)(e,2),n=t[0],a=t[1],o=Object(c.useState)(null),r=Object(d.a)(o,2),i=(r[0],r[1]),s=Object(c.useState)(!1),l=Object(d.a)(s,2),u=l[0],j=l[1];Object(c.useEffect)((function(){P.resetPage(),j(!0),P.trendingMovies().then((function(e){a(e),j(!1)})).catch((function(e){return i(e)}))}),[]);var v=function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})};return Object(h.jsxs)(h.Fragment,{children:[u&&Object(h.jsx)(C.a,{type:"Bars",color:"#00BFFF",height:200,width:200,timeout:3e3}),Object(h.jsx)("ul",{className:x.a.gallery,children:n.length>0&&n.map((function(e){var t=e.poster_path,n=e.id,c=e.original_title;return Object(h.jsx)(N,{id:n,poster:t,name:c},n)}))}),n.length>=20&&Object(h.jsx)(M,{onClick:function(){P.page=1,P.trendingMovies().then((function(e){a((function(t){return[].concat(Object(b.a)(t),Object(b.a)(e))}))})).then(v).catch((function(e){return i(e)}))}})]})}var L=n(12),G=n(14),Q=n.n(G),H=n(43);function D(e){var t=e.onSubmit,n=Object(c.useState)(""),a=Object(d.a)(n,2),o=a[0],r=a[1];return Object(h.jsx)("header",{className:Q.a.searchbar,children:Object(h.jsxs)("form",{className:Q.a.searchForm,onSubmit:function(e){e.preventDefault(),""!==o.trim()?(t(o),r("")):L.b.warn("Enter a name to search!")},children:[Object(h.jsx)("button",{type:"submit",className:Q.a.searchButton,children:Object(h.jsx)(H.a,{className:Q.a.reactIcons})}),Object(h.jsx)("input",{className:Q.a.searchInput,type:"text",name:"value",value:o,autoComplete:"off",autoFocus:!0,placeholder:"Search movies",onChange:function(e){r(e.target.value.toLowerCase())}})]})})}var J=n(42),T=n.n(J),U=(n(92),new O);function A(e){var t=e.value,n=function(e,t){var n=Object(c.useState)((function(){var n;return null!==(n=JSON.parse(window.localStorage.getItem(e)))&&void 0!==n?n:t})),a=Object(d.a)(n,2),o=a[0],r=a[1];return Object(c.useEffect)((function(){window.localStorage.setItem(e,JSON.stringify(o))}),[e,o]),[o,r]}("movies",[]),a=Object(d.a)(n,2),o=a[0],r=a[1],i=Object(c.useState)(null),s=Object(d.a)(i,2),l=(s[0],s[1]),u=Object(c.useState)(!1),j=Object(d.a)(u,2),v=j[0],m=j[1];Object(c.useEffect)((function(){t&&(U.resetPage(),m(!0),U.searchQuery=t,U.searchMovies().then((function(e){if(0===e.length)return L.b.warn("Nothihg found for this name! Enter correct name!"),void r([]);r(e),m(!1),console.log(e)})).catch((function(e){return l(e)})))}),[t,r]);var g=function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})};return Object(h.jsxs)(h.Fragment,{children:[v&&Object(h.jsx)(C.a,{type:"Bars",color:"#00BFFF",height:200,width:200,timeout:3e3}),Object(h.jsx)("ul",{className:T.a.gallery,children:o.length>0&&o.map((function(e){var t=e.poster_path,n=e.id,c=e.original_title;return Object(h.jsx)(N,{id:n,poster:t,name:c},n)}))}),o.length>=20&&Object(h.jsx)(M,{onClick:function(){U.page=1,U.searchMovies().then((function(e){r((function(t){return[].concat(Object(b.a)(t),Object(b.a)(e))}))})).then(g).catch((function(e){return l(e)}))}})]})}n(93);function q(){var e=Object(c.useState)(""),t=Object(d.a)(e,2),n=t[0],a=t[1];return Object(h.jsxs)("div",{className:"App",children:[Object(h.jsx)(D,{onSubmit:function(e){a(e)}}),Object(h.jsx)(A,{value:n}),Object(h.jsx)(L.a,{position:"top-left",autoClose:3e3})]})}function K(e){var t=e.movie,n=t.poster_path?"".concat("https://image.tmdb.org/t/p/w200").concat(t.poster_path):S;return Object(h.jsxs)("article",{children:[Object(h.jsx)("img",{src:n,alt:t.original_title}),Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:t.original_title}),Object(h.jsx)("span",{children:t.release_date}),Object(h.jsx)("h3",{children:"Popularity"}),Object(h.jsx)("p",{children:t.popularity}),Object(h.jsx)("h3",{children:"Overview"}),Object(h.jsx)("p",{children:t.overview}),Object(h.jsx)("h3",{children:"Genres"}),Object(h.jsx)("p",{children:t.genres.map((function(e){return e.name})).join(", ")})]})]})}var R=new O;function W(){var e,t,n,a=Object(s.f)(),o=Object(s.g)(),r=Object(s.h)(),i=Object(c.useState)(null),l=Object(d.a)(i,2),u=l[0],j=l[1];Object(c.useEffect)((function(){R.searchMoviesId(r.movieId).then((function(e){o.state?j(e):a.push(o.pathname="/notFound")})).catch((function(e){return alert(e)}))}),[r.movieId,a,o]);return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h1",{children:"Movie Details"}),Object(h.jsx)("button",{type:"button",onClick:function(){var e,t,n;a.push(null!==(e=null===o||void 0===o||null===(t=o.state)||void 0===t||null===(n=t.from)||void 0===n?void 0:n.location)&&void 0!==e?e:"/movies")},children:null!==(e=null===o||void 0===o||null===(t=o.state)||void 0===t||null===(n=t.from)||void 0===n?void 0:n.label)&&void 0!==e?e:"Go Back"}),u&&Object(h.jsx)(K,{movie:u})]})}function z(){var e=Object(s.f)();console.log("NFP history",e);var t=Object(s.g)();console.log("NFP location",t);return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h1",{children:"404 Page is not found"}),Object(h.jsx)("button",{type:"button",onClick:function(){var n,c,a;e.push(null!==(n=null===t||void 0===t||null===(c=t.state)||void 0===c||null===(a=c.form)||void 0===a?void 0:a.location)&&void 0!==n?n:"/")},children:"backToHome"})]})}var V=function(){return Object(h.jsxs)("div",{className:"App",children:[Object(h.jsx)(j,{}),Object(h.jsxs)(s.c,{children:[Object(h.jsx)(s.a,{path:"/",exact:!0,children:Object(h.jsx)(E,{})}),Object(h.jsx)(s.a,{path:"/movies",exact:!0,children:Object(h.jsx)(q,{})}),Object(h.jsx)(s.a,{path:"/movies/:movieId",children:Object(h.jsx)(W,{})}),Object(h.jsx)(s.a,{path:"/notFound",children:Object(h.jsx)(z,{})})]})]})};r.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(i.a,{children:Object(h.jsx)(V,{})})}),document.getElementById("root"))}},[[94,1,2]]]);
//# sourceMappingURL=main.85586e6b.chunk.js.map